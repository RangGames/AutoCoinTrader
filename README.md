# AutoCoinTrader
**암호화폐 자동매매 봇**

## 📖 개요 (Overview)

`AutoCoinTrader`은 Bithumb 거래소를 위한 고기능성 암호화폐 자동매매 봇입니다. 
이 봇은 래리 윌리엄스의 고전적인 **변동성 돌파(Volatility Breakout)** 전략을 핵심 로직으로 사용하되, 단순한 가격 신호의 한계를 극복하기 위해 다차원적인 데이터를 분석하는 **하이브리드 스코어링 모델**을 도입했습니다.

Python의 `asyncio`를 기반으로 한 비동기 아키텍처를 채택하여 여러 데이터 소스를 실시간으로 처리하며, 정교한 리스크 관리 및 주문 실행 로직을 통해 안정적인 운영을 지향합니다.

## ✨ 주요 특징 (Features)

  - **하이브리드 분석 모델**: 기술적 지표, LLM 예측, 국내외 뉴스 분석, 실시간 체결 데이터(Order Flow)를 종합하여 진입 결정
  - **명확한 매매 기준**: 변동성 돌파, 손익비, ATR 기반의 명확한 진입/청산 규칙
  - **정교한 리스크 관리**: ATR 기반 동적 손절/익절 및 자산 비율 기반 포지션 사이징
  - **안정적인 주문 실행**: 메이커(Maker) 주문을 우선 시도하고, 미체결 시 IOC 테이커(Taker) 주문으로 전환하여 비용과 체결률의 균형을 맞춤
  - **상태 관리**: 실행 중단 시에도 포지션 및 거래 상태를 복구하여 거래 연속성 보장
  - **모니터링 및 알림**: Telegram, Discord를 통한 실시간 거래 내역 및 상태 알림
  - **백테스팅 기능**: 주요 파라미터 최적화를 위한 간단한 그리드 서치 백테스터 내장

## 🤖 매매 전략 및 기준

### 1\. 매수 (Buy) 기준

봇은 아래의 **모든 조건**이 모두 충족될 때 매수 주문을 실행합니다.

1.  **변동성 돌파**: 현재 가격이 `목표가(Target)`를 **이상으로** 돌파해야 합니다.
    > **목표가 (Target Price) 계산식**
    > $$
    > \\text{Target} = \\text{금일 시가} + k \\times (\\text{전일 고가} - \\text{전일 저가})
    > $$
2.  **종합 점수 충족**: 기술, LLM, 뉴스, 체결 흐름을 종합한 `종합 점수(combo score)`가 설정된 `임계값(enter_threshold)`을 **이상**이어야 합니다. 이는 시장의 전반적인 상황이 긍정적일 때만 진입하기 위한 핵심 필터입니다.
3.  **포지션 부재**: 해당 암호화폐에 대해 현재 보유 중인 포지션이 **없어야** 합니다.
4.  **리스크 관리 통과**: 일일 최대 손실 제한 등 사전에 설정된 리스크 관리 규칙을 통과해야 합니다.

### 2\. 매도 (Sell) 기준

포지션을 보유하고 있을 경우, 아래 **세 가지 조건 중 하나라도 먼저 충족**되면 즉시 전량 매도합니다.

1.  **익절 (Take Profit)**: 현재 가격이 진입 시점에 설정된 `익절 목표가(take)`에 **도달하거나 넘어설 경우** 매도합니다.
    > `익절 목표가 = 진입가 + (손절 폭) * tp_rr`
2.  **손절 (Stop Loss)**: 현재 가격이 진입 시점에 설정된 `손절가(stop)`에 **도달하거나 그 아래로 떨어질 경우** 매도합니다.
    > `손절가 = 진입가 - (ATR * sl_atr_mult)`
3.  **당일 청산 (End of Day)**: 위 두 조건에 해당하지 않더라도, \*\*장이 마감되기 직전(23:59:30 KST)\*\*이 되면 강제로 포지션을 종료합니다. 이 봇은 다음 날로 포지션을 이월하지 않는 **데이 트레이딩(Day Trading)** 전략을 기본으로 합니다.

### 3\. 전략 파라미터 설정

매매 기준을 변경하려면 코드 상단의 `Config` 클래스에 있는 변수들의 값을 직접 수정하면 됩니다.

| 변수명 | 설명 | 변경 시 영향 |
| :--- | :--- | :--- |
| **매수 관련** |
| `k` | **변동성 돌파 민감도 계수** (기본값: 0.5) | 값이 **높을수록** 더 강한 상승 돌파가 필요하므로 매수 빈도가 **감소**합니다. |
| `enter_threshold` | **진입을 위한 최소 종합 점수** (기본값: 0.55) | 값이 **높을수록** 더 좋은 시장 상황에서만 진입하므로 매수 빈도가 **감소**합니다. |
| `w_tech`, `w_llm`, ... | **각 점수의 가중치** | 특정 점수의 가중치를 높이면 해당 요소를 더 중요하게 고려하게 됩니다. |
| **매도 관련** |
| `sl_atr_mult` | **손절 폭을 결정하는 ATR 승수** (기본값: 1.5) | 값이 **클수록** 손절 폭이 넓어져 작은 변동에 손절될 확률이 **감소**합니다. |
| `tp_rr` | **손익비(Reward/Risk Ratio)** (기본값: 2.0) | 값이 **클수록** 더 높은 수익을 목표로 하므로 익절 빈도는 **감소**하지만 성공 시 수익률은 **증가**합니다. |

## 🚀 시작하기 (Getting Started)

### 1\. 사전 준비 (Prerequisites)

  - Python 3.9 이상
  - Bithumb의 API 키 (필수, 계좌 거래 및 현재 시세 파악)
  - DeepSeek, NewsAPI 등의 API 키 (선택, 판매 가중치 수정)

### 2\. 설치 (Installation)

1.  저장소를 클론합니다.

    ```bash
    git clone https://github.com/RangGames/AutoCoinTrader.git
    cd AutoCoinTrader
    ```

2.  필요한 라이브러리를 설치합니다.

### 3\. 설정 (Configuration)

코드 상단의 `Config` 클래스의 파라미터를 자신의 전략과 환경에 맞게 수정합니다. 특히 API 키와 같은 민감한 정보는 환경 변수나 별도의 설정 파일을 사용하는 것을 권장합니다.

### 4\. 실행 (Usage)

#### 실거래/모의거래 실행

`Config` 클래스의 `dry_run` 파라미터를 조절하여 모의투자 또는 실거래를 시작할 수 있습니다.
( `dry_run = True` : 모의 투자, `dry_run = True` : 실거래 ) 
```bash
python AutoTraderBot.py
```

#### 백테스팅 실행

내장된 백테스터를 사용하여 특정 기간 동안의 파라미터 성과를 확인할 수 있습니다.

```bash
python AutoTraderBot.py --backtest --symbol "BTC/KRW" --start "2025-09-18" --end "2025-10-02"
```

결과는 `reports` 디렉터리에 CSV 파일과 히트맵 이미지로 저장됩니다.

## ⚠️ 면책 조항 (Disclaimer)

본 소프트웨어는 교육 및 연구 목적으로 제공되며, 어떠한 경우에도 투자 조언으로 간주되어서는 안 됩니다. 자동매매 시스템은 예기치 않은 버그나 시장의 급격한 변동으로 인해 심각한 금전적 손실을 야기할 수 있습니다.

**투자에 대한 모든 책임은 사용자 본인에게 있습니다.** 실제 자금으로 봇을 운영하기 전에는 반드시 충분한 모의투자와 백테스팅을 통해 그 성능과 리스크를 검증하시기 바랍니다.
